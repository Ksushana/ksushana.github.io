"use strict";jQuery(function(i){i.fn.showFirst=function(t){var s=new o(i(this),t);return s.init(),s};var e={controlTemplate:'<li class="show-first-control--outer"><a href="#" class="show-first-control card-colors__more">Cм. все цветовые варианты →</a></li>',count:10,hasControl:!0};function o(t,s){this.$group=t,this.settings=i.extend({},e,s),this.$items=this.$group.children(),this.hasSurplus=this.$items.length>this.settings.count,this.hasSurplus&&(this.indexStartOfRest=this.settings.count,this.$itemsFirst=this.$items.slice(0,this.indexStartOfRest),this.$itemsRest=this.$items.slice(this.indexStartOfRest))}o.prototype.init=function(){this.hasSurplus&&(this.$itemsRest.hide(),this.settings.hasControl&&this.addControl())},o.prototype.addControl=function(){var t=[{pattern:new RegExp("\\[TOTAL_COUNT\\]","g"),value:this.$items.length},{pattern:new RegExp("\\[FIRST_COUNT\\]","g"),value:this.$itemsFirst.length},{pattern:new RegExp("\\[REST_COUNT\\]","g"),value:this.$itemsRest.length}];this.controlWithValues=this.settings.controlTemplate;for(var s=0;s<t.length;s++)this.controlWithValues=this.controlWithValues.replace(t[s].pattern,t[s].value);this.$controlHtml=i(this.controlWithValues),this.$itemsFirst.last().after(this.$controlHtml),i(".show-first-control",this.$controlHtml).click(i.proxy(function(t){t.preventDefault(),this.$controlHtml.toggle(),this.$itemsRest.toggle()},this))},i(".show-first").each(function(){var t=i(this),s={};s.controlTemplate=t.data("show-first-control-template"),s.count=t.data("show-first-count"),s.hasControl=t.data("show-first-has-control"),t.showFirst(s)})});